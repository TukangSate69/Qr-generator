<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>QR from URL — Simple Generator</title>
  <style>
    :root{font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;margin:0}
    body{display:flex;align-items:center;justify-content:center;min-height:100vh;background:#f6f8fa}
    .card{background:#fff;padding:20px;border-radius:12px;box-shadow:0 6px 22px rgba(10,10,10,.08);width:360px}
    h1{font-size:18px;margin:0 0 12px}
    form{display:grid;gap:10px}
    input[type="url"]{width:100%;padding:10px;border-radius:8px;border:1px solid #ddd;font-size:14px}
    .row{display:flex;gap:8px}
    button{flex:1;padding:10px;border-radius:8px;border:0;background:#2563eb;color:#fff;font-weight:600;cursor:pointer}
    button.secondary{background:#6b7280}
    #qrcode-wrap{display:flex;justify-content:center;padding:12px 0}
    canvas{background:#fff;border-radius:8px}
    .small{font-size:13px;color:#6b7280;text-align:center}
    footer{margin-top:12px;text-align:center;font-size:12px;color:#9ca3af}
  </style>
</head>
<body>
  <main class="card" role="main">
    <h1>Generator QR — masukkan URL</h1>
    <form id="form">
      <input id="url" type="url" placeholder="https://example.com" required />
      <div class="row">
        <button id="generate" type="submit">Generate QR</button>
        <button id="clear" type="button" class="secondary">Clear</button>
      </div>
    </form>

    <div id="qrcode-wrap" aria-live="polite">
      <!-- canvas will be injected here -->
      <canvas id="qr-canvas" width=\"1000\" height=\"1000\" style="display:none"></canvas>
    </div>

    <div class="row" style="margin-top:8px;">
      <button id="download" type="button" class="secondary" disabled>Download PNG</button>
      <button id="open" type="button" disabled>Open in new tab</button>
    </div>

    <p class="small">Catatan: QR dibuat client-side. Tidak ada data yang dikirim ke server.</p>
    <footer>Butuh fitur lain? Contoh: ukuran, warna, atau file SVG — bilang saja.</footer>
  </main>

  <!-- QRious is a tiny library that draws QR codes to a canvas (MIT). Using CDN for simplicity. -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js" integrity="sha512-+GQ7s6wS6l7pFYKQxj5xF8d5r6lEo3e+qkXK1ZxYp2+5q8z1JQ0Oq8mG6p1f4Yc1FJ9a6Y2d+3y9h2KJ8JvPQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script>
    const form = document.getElementById('form');
    const urlInput = document.getElementById('url');
    const canvas = document.getElementById('qr-canvas');
    const wrap = document.getElementById('qrcode-wrap');
    const downloadBtn = document.getElementById('download');
    const openBtn = document.getElementById('open');
    const clearBtn = document.getElementById('clear');

    // create QRious instance that draws to the canvas
    const qr = new QRious({
      element: canvas,
      size: 1000,
      value: ''
    });

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const value = urlInput.value.trim();
      if (!value) return;

      // set QR value and show canvas
      qr.set({ value });
      canvas.style.display = 'block';

      // replace wrapper content with the canvas (keeps it centered)
      if (!wrap.contains(canvas)) wrap.appendChild(canvas);

      // enable buttons
      downloadBtn.disabled = false;
      openBtn.disabled = false;
    });

    downloadBtn.addEventListener('click', () => {
      // export canvas as PNG
      const dataUrl = canvas.toDataURL('image/png');
      const a = document.createElement('a');
      a.href = dataUrl;
      a.download = 'qrcode.png';
      document.body.appendChild(a);
      a.click();
      a.remove();
    });

    openBtn.addEventListener('click', () => {
      // open PNG in new tab so user can right-click/save
      const dataUrl = canvas.toDataURL('image/png');
      window.open(dataUrl, '_blank');
    });

    clearBtn.addEventListener('click', () => {
      urlInput.value = '';
      qr.set({ value: '' });
      canvas.style.display = 'none';
      downloadBtn.disabled = true;
      openBtn.disabled = true;
      urlInput.focus();
    });

    // allow pressing Enter in the URL field to submit
    urlInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        form.requestSubmit();
      }
    });
  </script>
</body>
</html>
